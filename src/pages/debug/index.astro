---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Card from "@/components/Card.astro";
import { getCollection } from "astro:content";

const debugArticles = await getCollection("debugging");
debugArticles.sort((a, b) => b.data.date.localeCompare(a.data.date));
---

<BaseLayout title="调试区 / Debugging" description="烹饪失败？这里有 Root Cause Analysis">
  <div class="mx-auto max-w-6xl px-6 py-12">
    <!-- Header -->
    <div class="mb-10">
      <div class="font-mono text-xs text-gray-600 mb-2">MOD_04</div>
      <h1 class="text-3xl font-bold text-gray-50 sm:text-4xl">
        调试区 <span class="text-brand-400">Debugging</span>
      </h1>
      <p class="mt-3 text-lg text-gray-400">
        烹饪失败不可怕，可怕的是不知道为什么失败。<br />
        这里是烹饪错误的 Root Cause Analysis。
      </p>
    </div>

    <!-- Debug Cards -->
    <div class="grid gap-4 sm:grid-cols-2">
      {debugArticles.map((article) => (
        <a
          href={`/debug/${article.id.replace(/\.mdx?$/, "")}`}
          class="group block rounded-xl border border-red-500/20 bg-gray-900/50 p-6 transition-all hover:border-red-500/40 hover:bg-gray-900"
        >
          <div class="flex items-center gap-2 mb-3">
            <span class="inline-block rounded-full bg-red-500/15 border border-red-500/30 px-2.5 py-0.5 text-xs font-mono text-red-400">
              BUG
            </span>
            <span class:list={[
              "inline-block rounded-full px-2.5 py-0.5 text-xs font-mono",
              article.data.field === "physics" ? "tag-physics" :
              article.data.field === "chemistry" ? "tag-chemistry" : "tag-biology"
            ]}>
              {article.data.field}
            </span>
          </div>
          <h3 class="text-lg font-semibold text-gray-100 group-hover:text-red-400 transition-colors">
            {article.data.title}
          </h3>
          <p class="mt-2 text-sm text-gray-400 line-clamp-2">
            {article.data.description}
          </p>
          <div class="mt-4 font-mono text-xs">
            <div class="text-gray-600">symptom: <span class="text-red-400/70">{article.data.symptom}</span></div>
            <div class="text-gray-600">root_cause: <span class="text-amber-400/70">{article.data.rootCause}</span></div>
          </div>
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
